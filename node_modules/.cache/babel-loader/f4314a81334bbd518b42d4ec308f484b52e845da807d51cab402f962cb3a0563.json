{"ast":null,"code":"const log = require('npmlog');\nconst fetch = require('npm-registry-fetch');\nconst getIdentity = require('./utils/get-identity.js');\nconst BaseCommand = require('./base-command.js');\nclass Stars extends BaseCommand {\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get description() {\n    return 'View packages marked as favorites';\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get name() {\n    return 'stars';\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get usage() {\n    return ['[<user>]'];\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get params() {\n    return ['registry'];\n  }\n  exec(args, cb) {\n    this.stars(args).then(() => cb()).catch(er => {\n      if (er.code === 'ENEEDAUTH') log.warn('stars', 'auth is required to look up your username');\n      cb(er);\n    });\n  }\n  async stars([user]) {\n    if (!user) user = await getIdentity(this.npm, this.npm.flatOptions);\n    const {\n      rows\n    } = await fetch.json('/-/_view/starredByUser', {\n      ...this.npm.flatOptions,\n      query: {\n        key: `\"${user}\"`\n      }\n    });\n    if (rows.length === 0) log.warn('stars', 'user has not starred any packages');\n    for (const row of rows) this.npm.output(row.value);\n  }\n}\nmodule.exports = Stars;","map":{"version":3,"names":["log","require","fetch","getIdentity","BaseCommand","Stars","description","name","usage","params","exec","args","cb","stars","then","catch","er","code","warn","user","npm","flatOptions","rows","json","query","key","length","row","output","value","module","exports"],"sources":["C:/Users/Felo/node_modules/npm/lib/stars.js"],"sourcesContent":["const log = require('npmlog')\nconst fetch = require('npm-registry-fetch')\n\nconst getIdentity = require('./utils/get-identity.js')\n\nconst BaseCommand = require('./base-command.js')\nclass Stars extends BaseCommand {\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get description () {\n    return 'View packages marked as favorites'\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get name () {\n    return 'stars'\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get usage () {\n    return ['[<user>]']\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get params () {\n    return [\n      'registry',\n    ]\n  }\n\n  exec (args, cb) {\n    this.stars(args).then(() => cb()).catch(er => {\n      if (er.code === 'ENEEDAUTH')\n        log.warn('stars', 'auth is required to look up your username')\n      cb(er)\n    })\n  }\n\n  async stars ([user]) {\n    if (!user)\n      user = await getIdentity(this.npm, this.npm.flatOptions)\n\n    const { rows } = await fetch.json('/-/_view/starredByUser', {\n      ...this.npm.flatOptions,\n      query: { key: `\"${user}\"` },\n    })\n\n    if (rows.length === 0)\n      log.warn('stars', 'user has not starred any packages')\n\n    for (const row of rows)\n      this.npm.output(row.value)\n  }\n}\nmodule.exports = Stars\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC7B,MAAMC,KAAK,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAE3C,MAAME,WAAW,GAAGF,OAAO,CAAC,yBAAyB,CAAC;AAEtD,MAAMG,WAAW,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AAChD,MAAMI,KAAK,SAASD,WAAW,CAAC;EAC9B;EACA,WAAWE,WAAWA,CAAA,EAAI;IACxB,OAAO,mCAAmC;EAC5C;;EAEA;EACA,WAAWC,IAAIA,CAAA,EAAI;IACjB,OAAO,OAAO;EAChB;;EAEA;EACA,WAAWC,KAAKA,CAAA,EAAI;IAClB,OAAO,CAAC,UAAU,CAAC;EACrB;;EAEA;EACA,WAAWC,MAAMA,CAAA,EAAI;IACnB,OAAO,CACL,UAAU,CACX;EACH;EAEAC,IAAIA,CAAEC,IAAI,EAAEC,EAAE,EAAE;IACd,IAAI,CAACC,KAAK,CAACF,IAAI,CAAC,CAACG,IAAI,CAAC,MAAMF,EAAE,CAAC,CAAC,CAAC,CAACG,KAAK,CAACC,EAAE,IAAI;MAC5C,IAAIA,EAAE,CAACC,IAAI,KAAK,WAAW,EACzBjB,GAAG,CAACkB,IAAI,CAAC,OAAO,EAAE,2CAA2C,CAAC;MAChEN,EAAE,CAACI,EAAE,CAAC;IACR,CAAC,CAAC;EACJ;EAEA,MAAMH,KAAKA,CAAE,CAACM,IAAI,CAAC,EAAE;IACnB,IAAI,CAACA,IAAI,EACPA,IAAI,GAAG,MAAMhB,WAAW,CAAC,IAAI,CAACiB,GAAG,EAAE,IAAI,CAACA,GAAG,CAACC,WAAW,CAAC;IAE1D,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,wBAAwB,EAAE;MAC1D,GAAG,IAAI,CAACH,GAAG,CAACC,WAAW;MACvBG,KAAK,EAAE;QAAEC,GAAG,EAAE,IAAIN,IAAI;MAAI;IAC5B,CAAC,CAAC;IAEF,IAAIG,IAAI,CAACI,MAAM,KAAK,CAAC,EACnB1B,GAAG,CAACkB,IAAI,CAAC,OAAO,EAAE,mCAAmC,CAAC;IAExD,KAAK,MAAMS,GAAG,IAAIL,IAAI,EACpB,IAAI,CAACF,GAAG,CAACQ,MAAM,CAACD,GAAG,CAACE,KAAK,CAAC;EAC9B;AACF;AACAC,MAAM,CAACC,OAAO,GAAG1B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}