{"ast":null,"code":"const {\n  promisify\n} = require('util');\nconst fs = require('fs');\nconst readFile = promisify(fs.readFile);\nconst lstat = promisify(fs.lstat);\nconst readdir = promisify(fs.readdir);\nconst parse = require('json-parse-even-better-errors');\nconst {\n  resolve,\n  dirname,\n  join,\n  relative\n} = require('path');\nconst rpj = path => readFile(path, 'utf8').then(data => readBinDir(path, normalize(stripUnderscores(parse(data))))).catch(er => {\n  er.path = path;\n  throw er;\n});\nconst normalizePackageBin = require('npm-normalize-package-bin');\n\n// load the directories.bin folder as a 'bin' object\nconst readBinDir = async (path, data) => {\n  if (data.bin) return data;\n  const m = data.directories && data.directories.bin;\n  if (!m || typeof m !== 'string') return data;\n\n  // cut off any monkey business, like setting directories.bin\n  // to ../../../etc/passwd or /etc/passwd or something like that.\n  const root = dirname(path);\n  const dir = join('.', join('/', m));\n  data.bin = await walkBinDir(root, dir, {});\n  return data;\n};\nconst walkBinDir = async (root, dir, obj) => {\n  const entries = await readdir(resolve(root, dir)).catch(() => []);\n  for (const entry of entries) {\n    if (entry.charAt(0) === '.') continue;\n    const f = resolve(root, dir, entry);\n    // ignore stat errors, weird file types, symlinks, etc.\n    const st = await lstat(f).catch(() => null);\n    if (!st) continue;else if (st.isFile()) obj[entry] = relative(root, f);else if (st.isDirectory()) await walkBinDir(root, join(dir, entry), obj);\n  }\n  return obj;\n};\n\n// do not preserve _fields set in files, they are sus\nconst stripUnderscores = data => {\n  for (const key of Object.keys(data).filter(k => /^_/.test(k))) delete data[key];\n  return data;\n};\nconst normalize = data => {\n  add_id(data);\n  fixBundled(data);\n  pruneRepeatedOptionals(data);\n  fixScripts(data);\n  fixFunding(data);\n  normalizePackageBin(data);\n  return data;\n};\nrpj.normalize = normalize;\nconst add_id = data => {\n  if (data.name && data.version) data._id = `${data.name}@${data.version}`;\n  return data;\n};\n\n// it was once common practice to list deps both in optionalDependencies\n// and in dependencies, to support npm versions that did not know abbout\n// optionalDependencies.  This is no longer a relevant need, so duplicating\n// the deps in two places is unnecessary and excessive.\nconst pruneRepeatedOptionals = data => {\n  const od = data.optionalDependencies;\n  const dd = data.dependencies || {};\n  if (od && typeof od === 'object') {\n    for (const name of Object.keys(od)) {\n      delete dd[name];\n    }\n  }\n  if (Object.keys(dd).length === 0) delete data.dependencies;\n  return data;\n};\nconst fixBundled = data => {\n  const bdd = data.bundledDependencies;\n  const bd = data.bundleDependencies === undefined ? bdd : data.bundleDependencies;\n  if (bd === false) data.bundleDependencies = [];else if (bd === true) data.bundleDependencies = Object.keys(data.dependencies || {});else if (bd && typeof bd === 'object') {\n    if (!Array.isArray(bd)) data.bundleDependencies = Object.keys(bd);else data.bundleDependencies = bd;\n  } else delete data.bundleDependencies;\n  delete data.bundledDependencies;\n  return data;\n};\nconst fixScripts = data => {\n  if (!data.scripts || typeof data.scripts !== 'object') {\n    delete data.scripts;\n    return data;\n  }\n  for (const [name, script] of Object.entries(data.scripts)) {\n    if (typeof script !== 'string') delete data.scripts[name];\n  }\n  return data;\n};\nconst fixFunding = data => {\n  if (data.funding && typeof data.funding === 'string') data.funding = {\n    url: data.funding\n  };\n  return data;\n};\nmodule.exports = rpj;","map":{"version":3,"names":["promisify","require","fs","readFile","lstat","readdir","parse","resolve","dirname","join","relative","rpj","path","then","data","readBinDir","normalize","stripUnderscores","catch","er","normalizePackageBin","bin","m","directories","root","dir","walkBinDir","obj","entries","entry","charAt","f","st","isFile","isDirectory","key","Object","keys","filter","k","test","add_id","fixBundled","pruneRepeatedOptionals","fixScripts","fixFunding","name","version","_id","od","optionalDependencies","dd","dependencies","length","bdd","bundledDependencies","bd","bundleDependencies","undefined","Array","isArray","scripts","script","funding","url","module","exports"],"sources":["C:/Users/Felo/node_modules/npm/node_modules/read-package-json-fast/index.js"],"sourcesContent":["const {promisify} = require('util')\nconst fs = require('fs')\nconst readFile = promisify(fs.readFile)\nconst lstat = promisify(fs.lstat)\nconst readdir = promisify(fs.readdir)\nconst parse = require('json-parse-even-better-errors')\n\nconst { resolve, dirname, join, relative } = require('path')\n\nconst rpj = path => readFile(path, 'utf8')\n  .then(data => readBinDir(path, normalize(stripUnderscores(parse(data)))))\n  .catch(er => {\n    er.path = path\n    throw er\n  })\n\nconst normalizePackageBin = require('npm-normalize-package-bin')\n\n// load the directories.bin folder as a 'bin' object\nconst readBinDir = async (path, data) => {\n  if (data.bin)\n    return data\n\n  const m = data.directories && data.directories.bin\n  if (!m || typeof m !== 'string')\n    return data\n\n  // cut off any monkey business, like setting directories.bin\n  // to ../../../etc/passwd or /etc/passwd or something like that.\n  const root = dirname(path)\n  const dir = join('.', join('/', m))\n  data.bin = await walkBinDir(root, dir, {})\n  return data\n}\n\nconst walkBinDir = async (root, dir, obj) => {\n  const entries = await readdir(resolve(root, dir)).catch(() => [])\n  for (const entry of entries) {\n    if (entry.charAt(0) === '.')\n      continue\n    const f = resolve(root, dir, entry)\n    // ignore stat errors, weird file types, symlinks, etc.\n    const st = await lstat(f).catch(() => null)\n    if (!st)\n      continue\n    else if (st.isFile())\n      obj[entry] = relative(root, f)\n    else if (st.isDirectory())\n      await walkBinDir(root, join(dir, entry), obj)\n  }\n  return obj\n}\n\n// do not preserve _fields set in files, they are sus\nconst stripUnderscores = data => {\n  for (const key of Object.keys(data).filter(k => /^_/.test(k)))\n    delete data[key]\n  return data\n}\n\nconst normalize = data => {\n  add_id(data)\n  fixBundled(data)\n  pruneRepeatedOptionals(data)\n  fixScripts(data)\n  fixFunding(data)\n  normalizePackageBin(data)\n  return data\n}\n\nrpj.normalize = normalize\n\nconst add_id = data => {\n  if (data.name && data.version)\n    data._id = `${data.name}@${data.version}`\n  return data\n}\n\n// it was once common practice to list deps both in optionalDependencies\n// and in dependencies, to support npm versions that did not know abbout\n// optionalDependencies.  This is no longer a relevant need, so duplicating\n// the deps in two places is unnecessary and excessive.\nconst pruneRepeatedOptionals = data => {\n  const od = data.optionalDependencies\n  const dd = data.dependencies || {}\n  if (od && typeof od === 'object') {\n    for (const name of Object.keys(od)) {\n      delete dd[name]\n    }\n  }\n  if (Object.keys(dd).length === 0)\n    delete data.dependencies\n  return data\n}\n\nconst fixBundled = data => {\n  const bdd = data.bundledDependencies\n  const bd = data.bundleDependencies === undefined ? bdd\n    : data.bundleDependencies\n\n  if (bd === false)\n    data.bundleDependencies = []\n  else if (bd === true)\n    data.bundleDependencies = Object.keys(data.dependencies || {})\n  else if (bd && typeof bd === 'object') {\n    if (!Array.isArray(bd))\n      data.bundleDependencies = Object.keys(bd)\n    else\n      data.bundleDependencies = bd\n  } else\n    delete data.bundleDependencies\n\n  delete data.bundledDependencies\n  return data\n}\n\nconst fixScripts = data => {\n  if (!data.scripts || typeof data.scripts !== 'object') {\n    delete data.scripts\n    return data\n  }\n\n  for (const [name, script] of Object.entries(data.scripts)) {\n    if (typeof script !== 'string')\n      delete data.scripts[name]\n  }\n  return data\n}\n\nconst fixFunding = data => {\n  if (data.funding && typeof data.funding === 'string')\n    data.funding = { url: data.funding }\n  return data\n}\n\nmodule.exports = rpj\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}