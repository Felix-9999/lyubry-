{"ast":null,"code":"'use strict';\n\nconst fetch = require('npm-registry-fetch');\nconst validate = require('aproba');\nconst eu = encodeURIComponent;\nconst cmd = module.exports = {};\ncmd.add = (name, endpoint, secret, opts = {}) => {\n  validate('SSSO', [name, endpoint, secret, opts]);\n  let type = 'package';\n  if (name.match(/^@[^/]+$/)) {\n    type = 'scope';\n  }\n  if (name[0] === '~') {\n    type = 'owner';\n    name = name.substr(1);\n  }\n  return fetch.json('/-/npm/v1/hooks/hook', {\n    ...opts,\n    method: 'POST',\n    body: {\n      type,\n      name,\n      endpoint,\n      secret\n    }\n  });\n};\ncmd.rm = (id, opts = {}) => {\n  validate('SO', [id, opts]);\n  return fetch.json(`/-/npm/v1/hooks/hook/${eu(id)}`, {\n    ...opts,\n    method: 'DELETE'\n  }).catch(err => {\n    if (err.code === 'E404') {\n      return null;\n    } else {\n      throw err;\n    }\n  });\n};\ncmd.update = (id, endpoint, secret, opts = {}) => {\n  validate('SSSO', [id, endpoint, secret, opts]);\n  return fetch.json(`/-/npm/v1/hooks/hook/${eu(id)}`, {\n    ...opts,\n    method: 'PUT',\n    body: {\n      endpoint,\n      secret\n    }\n  });\n};\ncmd.find = (id, opts = {}) => {\n  validate('SO', [id, opts]);\n  return fetch.json(`/-/npm/v1/hooks/hook/${eu(id)}`, opts);\n};\ncmd.ls = (opts = {}) => {\n  return cmd.ls.stream(opts).collect();\n};\ncmd.ls.stream = (opts = {}) => {\n  const {\n    package: pkg,\n    limit,\n    offset\n  } = opts;\n  validate('S|Z', [pkg]);\n  validate('N|Z', [limit]);\n  validate('N|Z', [offset]);\n  return fetch.json.stream('/-/npm/v1/hooks', 'objects.*', {\n    ...opts,\n    query: {\n      package: pkg,\n      limit,\n      offset\n    }\n  });\n};","map":{"version":3,"names":["fetch","require","validate","eu","encodeURIComponent","cmd","module","exports","add","name","endpoint","secret","opts","type","match","substr","json","method","body","rm","id","catch","err","code","update","find","ls","stream","collect","package","pkg","limit","offset","query"],"sources":["C:/Users/Felo/node_modules/npm/node_modules/libnpmhook/index.js"],"sourcesContent":["'use strict'\n\nconst fetch = require('npm-registry-fetch')\nconst validate = require('aproba')\n\nconst eu = encodeURIComponent\nconst cmd = module.exports = {}\ncmd.add = (name, endpoint, secret, opts = {}) => {\n  validate('SSSO', [name, endpoint, secret, opts])\n  let type = 'package'\n  if (name.match(/^@[^/]+$/)) {\n    type = 'scope'\n  }\n  if (name[0] === '~') {\n    type = 'owner'\n    name = name.substr(1)\n  }\n  return fetch.json('/-/npm/v1/hooks/hook', {\n    ...opts,\n    method: 'POST',\n    body: { type, name, endpoint, secret }\n  })\n}\n\ncmd.rm = (id, opts = {}) => {\n  validate('SO', [id, opts])\n  return fetch.json(`/-/npm/v1/hooks/hook/${eu(id)}`, {\n    ...opts,\n    method: 'DELETE'\n  }).catch(err => {\n    if (err.code === 'E404') {\n      return null\n    } else {\n      throw err\n    }\n  })\n}\n\ncmd.update = (id, endpoint, secret, opts = {}) => {\n  validate('SSSO', [id, endpoint, secret, opts])\n  return fetch.json(`/-/npm/v1/hooks/hook/${eu(id)}`, {\n    ...opts,\n    method: 'PUT',\n    body: {endpoint, secret}\n  })\n}\n\ncmd.find = (id, opts = {}) => {\n  validate('SO', [id, opts])\n  return fetch.json(`/-/npm/v1/hooks/hook/${eu(id)}`, opts)\n}\n\ncmd.ls = (opts = {}) => {\n  return cmd.ls.stream(opts).collect()\n}\n\ncmd.ls.stream = (opts = {}) => {\n  const { package: pkg, limit, offset } = opts\n  validate('S|Z', [pkg])\n  validate('N|Z', [limit])\n  validate('N|Z', [offset])\n  return fetch.json.stream('/-/npm/v1/hooks', 'objects.*', {\n    ...opts,\n    query: {\n      package: pkg,\n      limit,\n      offset\n    }\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}