{"ast":null,"code":"const log = require('npmlog');\nconst npa = require('npm-package-arg');\nconst npmFetch = require('npm-registry-fetch');\nconst pacote = require('pacote');\nconst otplease = require('./utils/otplease.js');\nconst readLocalPkgName = require('./utils/read-package-name.js');\nconst BaseCommand = require('./base-command.js');\nclass Owner extends BaseCommand {\n  static get description() {\n    return 'Manage package owners';\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get name() {\n    return 'owner';\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get params() {\n    return ['registry', 'otp'];\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get usage() {\n    return ['add <user> [<@scope>/]<pkg>', 'rm <user> [<@scope>/]<pkg>', 'ls [<@scope>/]<pkg>'];\n  }\n  async completion(opts) {\n    const argv = opts.conf.argv.remain;\n    if (argv.length > 3) return [];\n    if (argv[1] !== 'owner') argv.unshift('owner');\n    if (argv.length === 2) return ['add', 'rm', 'ls'];\n\n    // reaches registry in order to autocomplete rm\n    if (argv[2] === 'rm') {\n      if (this.npm.config.get('global')) return [];\n      const pkgName = await readLocalPkgName(this.npm.prefix);\n      if (!pkgName) return [];\n      const spec = npa(pkgName);\n      const data = await pacote.packument(spec, {\n        ...this.npm.flatOptions,\n        fullMetadata: true\n      });\n      if (data && data.maintainers && data.maintainers.length) return data.maintainers.map(m => m.name);\n    }\n    return [];\n  }\n  exec(args, cb) {\n    this.owner(args).then(() => cb()).catch(cb);\n  }\n  async owner([action, ...args]) {\n    const opts = this.npm.flatOptions;\n    switch (action) {\n      case 'ls':\n      case 'list':\n        return this.ls(args[0], opts);\n      case 'add':\n        return this.add(args[0], args[1], opts);\n      case 'rm':\n      case 'remove':\n        return this.rm(args[0], args[1], opts);\n      default:\n        throw this.usageError();\n    }\n  }\n  async ls(pkg, opts) {\n    if (!pkg) {\n      if (this.npm.config.get('global')) throw this.usageError();\n      const pkgName = await readLocalPkgName(this.npm.prefix);\n      if (!pkgName) throw this.usageError();\n      pkg = pkgName;\n    }\n    const spec = npa(pkg);\n    try {\n      const packumentOpts = {\n        ...opts,\n        fullMetadata: true\n      };\n      const {\n        maintainers\n      } = await pacote.packument(spec, packumentOpts);\n      if (!maintainers || !maintainers.length) this.npm.output('no admin found');else this.npm.output(maintainers.map(o => `${o.name} <${o.email}>`).join('\\n'));\n      return maintainers;\n    } catch (err) {\n      log.error('owner ls', \"Couldn't get owner data\", pkg);\n      throw err;\n    }\n  }\n  async add(user, pkg, opts) {\n    if (!user) throw this.usageError();\n    if (!pkg) {\n      if (this.npm.config.get('global')) throw this.usageError();\n      const pkgName = await readLocalPkgName(this.npm.prefix);\n      if (!pkgName) throw this.usageError();\n      pkg = pkgName;\n    }\n    log.verbose('owner add', '%s to %s', user, pkg);\n    const spec = npa(pkg);\n    return this.putOwners(spec, user, opts, (newOwner, owners) => this.validateAddOwner(newOwner, owners));\n  }\n  async rm(user, pkg, opts) {\n    if (!user) throw this.usageError();\n    if (!pkg) {\n      if (this.npm.config.get('global')) throw this.usageError();\n      const pkgName = await readLocalPkgName(this.npm.prefix);\n      if (!pkgName) throw this.usageError();\n      pkg = pkgName;\n    }\n    log.verbose('owner rm', '%s from %s', user, pkg);\n    const spec = npa(pkg);\n    return this.putOwners(spec, user, opts, (rmOwner, owners) => this.validateRmOwner(rmOwner, owners));\n  }\n  async putOwners(spec, user, opts, validation) {\n    const uri = `/-/user/org.couchdb.user:${encodeURIComponent(user)}`;\n    let u = '';\n    try {\n      u = await npmFetch.json(uri, opts);\n    } catch (err) {\n      log.error('owner mutate', `Error getting user data for ${user}`);\n      throw err;\n    }\n    if (user && (!u || !u.name || u.error)) {\n      throw Object.assign(new Error(\"Couldn't get user data for \" + user + ': ' + JSON.stringify(u)), {\n        code: 'EOWNERUSER'\n      });\n    }\n\n    // normalize user data\n    u = {\n      name: u.name,\n      email: u.email\n    };\n    const data = await pacote.packument(spec, {\n      ...opts,\n      fullMetadata: true\n    });\n\n    // save the number of maintainers before validation for comparison\n    const before = data.maintainers ? data.maintainers.length : 0;\n    const m = validation(u, data.maintainers);\n    if (!m) return; // invalid owners\n\n    const body = {\n      _id: data._id,\n      _rev: data._rev,\n      maintainers: m\n    };\n    const dataPath = `/${spec.escapedName}/-rev/${encodeURIComponent(data._rev)}`;\n    const res = await otplease(opts, opts => {\n      return npmFetch.json(dataPath, {\n        ...opts,\n        method: 'PUT',\n        body,\n        spec\n      });\n    });\n    if (!res.error) {\n      if (m.length < before) this.npm.output(`- ${user} (${spec.name})`);else this.npm.output(`+ ${user} (${spec.name})`);\n    } else {\n      throw Object.assign(new Error('Failed to update package: ' + JSON.stringify(res)), {\n        code: 'EOWNERMUTATE'\n      });\n    }\n    return res;\n  }\n  validateAddOwner(newOwner, owners) {\n    owners = owners || [];\n    for (const o of owners) {\n      if (o.name === newOwner.name) {\n        log.info('owner add', 'Already a package owner: ' + o.name + ' <' + o.email + '>');\n        return false;\n      }\n    }\n    return [...owners, newOwner];\n  }\n  validateRmOwner(rmOwner, owners) {\n    let found = false;\n    const m = owners.filter(function (o) {\n      var match = o.name === rmOwner.name;\n      found = found || match;\n      return !match;\n    });\n    if (!found) {\n      log.info('owner rm', 'Not a package owner: ' + rmOwner.name);\n      return false;\n    }\n    if (!m.length) {\n      throw Object.assign(new Error('Cannot remove all owners of a package. Add someone else first.'), {\n        code: 'EOWNERRM'\n      });\n    }\n    return m;\n  }\n}\nmodule.exports = Owner;","map":{"version":3,"names":["log","require","npa","npmFetch","pacote","otplease","readLocalPkgName","BaseCommand","Owner","description","name","params","usage","completion","opts","argv","conf","remain","length","unshift","npm","config","get","pkgName","prefix","spec","data","packument","flatOptions","fullMetadata","maintainers","map","m","exec","args","cb","owner","then","catch","action","ls","add","rm","usageError","pkg","packumentOpts","output","o","email","join","err","error","user","verbose","putOwners","newOwner","owners","validateAddOwner","rmOwner","validateRmOwner","validation","uri","encodeURIComponent","u","json","Object","assign","Error","JSON","stringify","code","before","body","_id","_rev","dataPath","escapedName","res","method","info","found","filter","match","module","exports"],"sources":["C:/Users/Felo/node_modules/npm/lib/owner.js"],"sourcesContent":["const log = require('npmlog')\nconst npa = require('npm-package-arg')\nconst npmFetch = require('npm-registry-fetch')\nconst pacote = require('pacote')\n\nconst otplease = require('./utils/otplease.js')\nconst readLocalPkgName = require('./utils/read-package-name.js')\nconst BaseCommand = require('./base-command.js')\n\nclass Owner extends BaseCommand {\n  static get description () {\n    return 'Manage package owners'\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get name () {\n    return 'owner'\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get params () {\n    return [\n      'registry',\n      'otp',\n    ]\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get usage () {\n    return [\n      'add <user> [<@scope>/]<pkg>',\n      'rm <user> [<@scope>/]<pkg>',\n      'ls [<@scope>/]<pkg>',\n    ]\n  }\n\n  async completion (opts) {\n    const argv = opts.conf.argv.remain\n    if (argv.length > 3)\n      return []\n\n    if (argv[1] !== 'owner')\n      argv.unshift('owner')\n\n    if (argv.length === 2)\n      return ['add', 'rm', 'ls']\n\n    // reaches registry in order to autocomplete rm\n    if (argv[2] === 'rm') {\n      if (this.npm.config.get('global'))\n        return []\n      const pkgName = await readLocalPkgName(this.npm.prefix)\n      if (!pkgName)\n        return []\n\n      const spec = npa(pkgName)\n      const data = await pacote.packument(spec, {\n        ...this.npm.flatOptions,\n        fullMetadata: true,\n      })\n      if (data && data.maintainers && data.maintainers.length)\n        return data.maintainers.map(m => m.name)\n    }\n    return []\n  }\n\n  exec (args, cb) {\n    this.owner(args).then(() => cb()).catch(cb)\n  }\n\n  async owner ([action, ...args]) {\n    const opts = this.npm.flatOptions\n    switch (action) {\n      case 'ls':\n      case 'list':\n        return this.ls(args[0], opts)\n      case 'add':\n        return this.add(args[0], args[1], opts)\n      case 'rm':\n      case 'remove':\n        return this.rm(args[0], args[1], opts)\n      default:\n        throw this.usageError()\n    }\n  }\n\n  async ls (pkg, opts) {\n    if (!pkg) {\n      if (this.npm.config.get('global'))\n        throw this.usageError()\n\n      const pkgName = await readLocalPkgName(this.npm.prefix)\n      if (!pkgName)\n        throw this.usageError()\n\n      pkg = pkgName\n    }\n\n    const spec = npa(pkg)\n\n    try {\n      const packumentOpts = { ...opts, fullMetadata: true }\n      const { maintainers } = await pacote.packument(spec, packumentOpts)\n      if (!maintainers || !maintainers.length)\n        this.npm.output('no admin found')\n      else\n        this.npm.output(maintainers.map(o => `${o.name} <${o.email}>`).join('\\n'))\n\n      return maintainers\n    } catch (err) {\n      log.error('owner ls', \"Couldn't get owner data\", pkg)\n      throw err\n    }\n  }\n\n  async add (user, pkg, opts) {\n    if (!user)\n      throw this.usageError()\n\n    if (!pkg) {\n      if (this.npm.config.get('global'))\n        throw this.usageError()\n      const pkgName = await readLocalPkgName(this.npm.prefix)\n      if (!pkgName)\n        throw this.usageError()\n\n      pkg = pkgName\n    }\n    log.verbose('owner add', '%s to %s', user, pkg)\n\n    const spec = npa(pkg)\n    return this.putOwners(spec, user, opts,\n      (newOwner, owners) => this.validateAddOwner(newOwner, owners))\n  }\n\n  async rm (user, pkg, opts) {\n    if (!user)\n      throw this.usageError()\n\n    if (!pkg) {\n      if (this.npm.config.get('global'))\n        throw this.usageError()\n      const pkgName = await readLocalPkgName(this.npm.prefix)\n      if (!pkgName)\n        throw this.usageError()\n\n      pkg = pkgName\n    }\n    log.verbose('owner rm', '%s from %s', user, pkg)\n\n    const spec = npa(pkg)\n    return this.putOwners(spec, user, opts,\n      (rmOwner, owners) => this.validateRmOwner(rmOwner, owners))\n  }\n\n  async putOwners (spec, user, opts, validation) {\n    const uri = `/-/user/org.couchdb.user:${encodeURIComponent(user)}`\n    let u = ''\n\n    try {\n      u = await npmFetch.json(uri, opts)\n    } catch (err) {\n      log.error('owner mutate', `Error getting user data for ${user}`)\n      throw err\n    }\n\n    if (user && (!u || !u.name || u.error)) {\n      throw Object.assign(\n        new Error(\n          \"Couldn't get user data for \" + user + ': ' + JSON.stringify(u)\n        ),\n        { code: 'EOWNERUSER' }\n      )\n    }\n\n    // normalize user data\n    u = { name: u.name, email: u.email }\n\n    const data = await pacote.packument(spec, { ...opts, fullMetadata: true })\n\n    // save the number of maintainers before validation for comparison\n    const before = data.maintainers ? data.maintainers.length : 0\n\n    const m = validation(u, data.maintainers)\n    if (!m)\n      return // invalid owners\n\n    const body = {\n      _id: data._id,\n      _rev: data._rev,\n      maintainers: m,\n    }\n    const dataPath = `/${spec.escapedName}/-rev/${encodeURIComponent(data._rev)}`\n    const res = await otplease(opts, opts => {\n      return npmFetch.json(dataPath, {\n        ...opts,\n        method: 'PUT',\n        body,\n        spec,\n      })\n    })\n\n    if (!res.error) {\n      if (m.length < before)\n        this.npm.output(`- ${user} (${spec.name})`)\n      else\n        this.npm.output(`+ ${user} (${spec.name})`)\n    } else {\n      throw Object.assign(\n        new Error('Failed to update package: ' + JSON.stringify(res)),\n        { code: 'EOWNERMUTATE' }\n      )\n    }\n    return res\n  }\n\n  validateAddOwner (newOwner, owners) {\n    owners = owners || []\n    for (const o of owners) {\n      if (o.name === newOwner.name) {\n        log.info(\n          'owner add',\n          'Already a package owner: ' + o.name + ' <' + o.email + '>'\n        )\n        return false\n      }\n    }\n    return [\n      ...owners,\n      newOwner,\n    ]\n  }\n\n  validateRmOwner (rmOwner, owners) {\n    let found = false\n    const m = owners.filter(function (o) {\n      var match = (o.name === rmOwner.name)\n      found = found || match\n      return !match\n    })\n\n    if (!found) {\n      log.info('owner rm', 'Not a package owner: ' + rmOwner.name)\n      return false\n    }\n\n    if (!m.length) {\n      throw Object.assign(\n        new Error(\n          'Cannot remove all owners of a package. Add someone else first.'\n        ),\n        { code: 'EOWNERRM' }\n      )\n    }\n\n    return m\n  }\n}\nmodule.exports = Owner\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}