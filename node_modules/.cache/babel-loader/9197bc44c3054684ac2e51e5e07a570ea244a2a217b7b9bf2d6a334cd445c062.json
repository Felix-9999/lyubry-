{"ast":null,"code":"const git = require('@npmcli/git');\n\n// returns true if it's cool to do git stuff\n// throws if it's unclean, and not forced.\nmodule.exports = async opts => {\n  const {\n    force,\n    log\n  } = opts;\n  let hadError = false;\n  const clean = await git.isClean(opts).catch(er => {\n    if (er.code === 'ENOGIT') {\n      log.warn('version', 'This is a Git checkout, but the git command was not found.', 'npm could not create a Git tag for this release!');\n      hadError = true;\n      // how can merges be real if our git isn't real?\n      return true;\n    } else {\n      throw er;\n    }\n  });\n  if (!clean) {\n    if (!force) {\n      throw new Error('Git working directory not clean.');\n    }\n    log.warn('version', 'Git working directory not clean, proceeding forcefully.');\n  }\n  return !hadError;\n};","map":{"version":3,"names":["git","require","module","exports","opts","force","log","hadError","clean","isClean","catch","er","code","warn","Error"],"sources":["C:/Users/Felo/node_modules/npm/node_modules/libnpmversion/lib/enforce-clean.js"],"sourcesContent":["const git = require('@npmcli/git')\n\n// returns true if it's cool to do git stuff\n// throws if it's unclean, and not forced.\nmodule.exports = async opts => {\n  const { force, log } = opts\n  let hadError = false\n  const clean = await git.isClean(opts).catch(er => {\n    if (er.code === 'ENOGIT') {\n      log.warn(\n        'version',\n        'This is a Git checkout, but the git command was not found.',\n        'npm could not create a Git tag for this release!'\n      )\n      hadError = true\n      // how can merges be real if our git isn't real?\n      return true\n    } else {\n      throw er\n    }\n  })\n\n  if (!clean) {\n    if (!force) {\n      throw new Error('Git working directory not clean.')\n    }\n    log.warn('version', 'Git working directory not clean, proceeding forcefully.')\n  }\n\n  return !hadError\n}\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,aAAa,CAAC;;AAElC;AACA;AACAC,MAAM,CAACC,OAAO,GAAG,MAAMC,IAAI,IAAI;EAC7B,MAAM;IAAEC,KAAK;IAAEC;EAAI,CAAC,GAAGF,IAAI;EAC3B,IAAIG,QAAQ,GAAG,KAAK;EACpB,MAAMC,KAAK,GAAG,MAAMR,GAAG,CAACS,OAAO,CAACL,IAAI,CAAC,CAACM,KAAK,CAACC,EAAE,IAAI;IAChD,IAAIA,EAAE,CAACC,IAAI,KAAK,QAAQ,EAAE;MACxBN,GAAG,CAACO,IAAI,CACN,SAAS,EACT,4DAA4D,EAC5D,kDACF,CAAC;MACDN,QAAQ,GAAG,IAAI;MACf;MACA,OAAO,IAAI;IACb,CAAC,MAAM;MACL,MAAMI,EAAE;IACV;EACF,CAAC,CAAC;EAEF,IAAI,CAACH,KAAK,EAAE;IACV,IAAI,CAACH,KAAK,EAAE;MACV,MAAM,IAAIS,KAAK,CAAC,kCAAkC,CAAC;IACrD;IACAR,GAAG,CAACO,IAAI,CAAC,SAAS,EAAE,yDAAyD,CAAC;EAChF;EAEA,OAAO,CAACN,QAAQ;AAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}