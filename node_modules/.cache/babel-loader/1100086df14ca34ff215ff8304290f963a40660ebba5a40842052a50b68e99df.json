{"ast":null,"code":"// print an error or just nothing if the audit report has an error\n// this is called by the audit command, and by the reify-output util\n// prints a JSON version of the error if it's --json\n// returns 'true' if there was an error, false otherwise\n\nconst auditError = (npm, report) => {\n  if (!report || !report.error) return false;\n  if (npm.command !== 'audit') return true;\n  const {\n    error\n  } = report;\n\n  // ok, we care about it, then\n  npm.log.warn('audit', error.message);\n  const {\n    body: errBody\n  } = error;\n  const body = Buffer.isBuffer(errBody) ? errBody.toString() : errBody;\n  if (npm.flatOptions.json) {\n    npm.output(JSON.stringify({\n      message: error.message,\n      method: error.method,\n      uri: error.uri,\n      headers: error.headers,\n      statusCode: error.statusCode,\n      body\n    }, null, 2));\n  } else npm.output(body);\n  throw 'audit endpoint returned an error';\n};\nmodule.exports = auditError;","map":{"version":3,"names":["auditError","npm","report","error","command","log","warn","message","body","errBody","Buffer","isBuffer","toString","flatOptions","json","output","JSON","stringify","method","uri","headers","statusCode","module","exports"],"sources":["C:/Users/Felo/node_modules/npm/lib/utils/audit-error.js"],"sourcesContent":["// print an error or just nothing if the audit report has an error\n// this is called by the audit command, and by the reify-output util\n// prints a JSON version of the error if it's --json\n// returns 'true' if there was an error, false otherwise\n\nconst auditError = (npm, report) => {\n  if (!report || !report.error)\n    return false\n\n  if (npm.command !== 'audit')\n    return true\n\n  const { error } = report\n\n  // ok, we care about it, then\n  npm.log.warn('audit', error.message)\n  const { body: errBody } = error\n  const body = Buffer.isBuffer(errBody) ? errBody.toString() : errBody\n  if (npm.flatOptions.json) {\n    npm.output(JSON.stringify({\n      message: error.message,\n      method: error.method,\n      uri: error.uri,\n      headers: error.headers,\n      statusCode: error.statusCode,\n      body,\n    }, null, 2))\n  } else\n    npm.output(body)\n\n  throw 'audit endpoint returned an error'\n}\n\nmodule.exports = auditError\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAMA,UAAU,GAAGA,CAACC,GAAG,EAAEC,MAAM,KAAK;EAClC,IAAI,CAACA,MAAM,IAAI,CAACA,MAAM,CAACC,KAAK,EAC1B,OAAO,KAAK;EAEd,IAAIF,GAAG,CAACG,OAAO,KAAK,OAAO,EACzB,OAAO,IAAI;EAEb,MAAM;IAAED;EAAM,CAAC,GAAGD,MAAM;;EAExB;EACAD,GAAG,CAACI,GAAG,CAACC,IAAI,CAAC,OAAO,EAAEH,KAAK,CAACI,OAAO,CAAC;EACpC,MAAM;IAAEC,IAAI,EAAEC;EAAQ,CAAC,GAAGN,KAAK;EAC/B,MAAMK,IAAI,GAAGE,MAAM,CAACC,QAAQ,CAACF,OAAO,CAAC,GAAGA,OAAO,CAACG,QAAQ,CAAC,CAAC,GAAGH,OAAO;EACpE,IAAIR,GAAG,CAACY,WAAW,CAACC,IAAI,EAAE;IACxBb,GAAG,CAACc,MAAM,CAACC,IAAI,CAACC,SAAS,CAAC;MACxBV,OAAO,EAAEJ,KAAK,CAACI,OAAO;MACtBW,MAAM,EAAEf,KAAK,CAACe,MAAM;MACpBC,GAAG,EAAEhB,KAAK,CAACgB,GAAG;MACdC,OAAO,EAAEjB,KAAK,CAACiB,OAAO;MACtBC,UAAU,EAAElB,KAAK,CAACkB,UAAU;MAC5Bb;IACF,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EACd,CAAC,MACCP,GAAG,CAACc,MAAM,CAACP,IAAI,CAAC;EAElB,MAAM,kCAAkC;AAC1C,CAAC;AAEDc,MAAM,CAACC,OAAO,GAAGvB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}